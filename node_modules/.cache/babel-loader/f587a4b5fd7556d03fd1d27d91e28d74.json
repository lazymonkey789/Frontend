{"ast":null,"code":"import _regeneratorRuntime from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* Î°úÍ∑∏Ïù∏ Ïª¥Ìè¨ÎÑåÌä∏ */import React from\"react\";import axios from\"axios\";import{useState,useContext}from\"react\";import{useNavigate}from\"react-router\";import{AuthContext}from\"../context/AuthProvider\";import{HttpHeadersContext}from\"../context/HttpHeadersProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useContext=useContext(AuthContext),auth=_useContext.auth,setAuth=_useContext.setAuth;var _useContext2=useContext(HttpHeadersContext),headers=_useContext2.headers,setHeaders=_useContext2.setHeaders;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),pwd=_useState4[0],setPwd=_useState4[1];var changeId=function changeId(event){setId(event.target.value);};var changePwd=function changePwd(event){setPwd(event.target.value);};var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var req;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:req={id:id,pwd:pwd};_context.next=3;return axios.post(\"http://localhost:3000/user/login\",req).then(function(resp){console.log(\"[Login.js] login() success :D\");console.log(resp.data);alert(resp.data.id+\"Îãò, ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î°úÍ∑∏Ïù∏ ÎêòÏóàÏäµÎãàÎã§ üîê\");// JWT ÌÜ†ÌÅ∞ Ï†ÄÏû•\nlocalStorage.setItem(\"bbs_access_token\",resp.data.jwt);localStorage.setItem(\"id\",resp.data.id);setAuth(resp.data.id);// ÏÇ¨Ïö©Ïûê Ïù∏Ï¶ù Ï†ïÎ≥¥(ÏïÑÏù¥Îîî Ï†ÄÏû•)\nsetHeaders({\"Authorization\":\"Bearer \".concat(resp.data.jwt)});// Ìó§Îçî Authorization ÌïÑÎìú Ï†ÄÏû•\nnavigate(\"/bbslist\");}).catch(function(err){console.log(\"[Login.js] login() error :<\");console.log(err);alert(\"‚ö†Ô∏è \"+err.response.data);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function login(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-3\",children:\"\\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:id,onChange:changeId,size:\"50px\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:pwd,onChange:changePwd,size:\"50px\"})})]})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"my-1 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:login,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-in-alt\"}),\" \\uB85C\\uADF8\\uC778\"]})})]});}export default Login;","map":{"version":3,"names":["React","axios","useState","useContext","useNavigate","AuthContext","HttpHeadersContext","Login","auth","setAuth","headers","setHeaders","navigate","id","setId","pwd","setPwd","changeId","event","target","value","changePwd","login","req","post","then","resp","console","log","data","alert","localStorage","setItem","jwt","catch","err","response"],"sources":["C:/Equinox/Workspace/frontend/src/Components/member/Login.js"],"sourcesContent":["/* Î°úÍ∑∏Ïù∏ Ïª¥Ìè¨ÎÑåÌä∏ */\n\nimport  React from \"react\";\nimport axios from \"axios\";\nimport { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport { AuthContext } from \"../context/AuthProvider\";\nimport { HttpHeadersContext } from \"../context/HttpHeadersProvider\";\n\nfunction Login() {\n\n\tconst { auth, setAuth } = useContext(AuthContext);\n\tconst { headers, setHeaders } = useContext(HttpHeadersContext);\n\n\tconst navigate = useNavigate();\n\n\tconst [id, setId] = useState(\"\");\n\tconst [pwd, setPwd] = useState(\"\");\n\n\tconst changeId = (event) => {\n\t\tsetId(event.target.value);\n\t}\n\n\tconst changePwd = (event) => {\n\t\tsetPwd(event.target.value);\n\t}\n\n\tconst login = async () => {\n\n\t\tconst req = {\n\t\t\tid: id,\n\t\t\tpwd: pwd\n\t\t}\n\n\t\tawait axios.post(\"http://localhost:3000/user/login\", req)\n\t\t.then((resp) => {\n\t\t\tconsole.log(\"[Login.js] login() success :D\");\n\t\t\tconsole.log(resp.data);\n\n\t\t\t\talert(resp.data.id + \"Îãò, ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î°úÍ∑∏Ïù∏ ÎêòÏóàÏäµÎãàÎã§ üîê\");\n\n\t\t\t\t// JWT ÌÜ†ÌÅ∞ Ï†ÄÏû•\n\t\t\t\tlocalStorage.setItem(\"bbs_access_token\", resp.data.jwt);\n\t\t\t\tlocalStorage.setItem(\"id\", resp.data.id);\n\n\t\t\t\tsetAuth(resp.data.id); // ÏÇ¨Ïö©Ïûê Ïù∏Ï¶ù Ï†ïÎ≥¥(ÏïÑÏù¥Îîî Ï†ÄÏû•)\n\t\t\t\tsetHeaders({\"Authorization\": `Bearer ${resp.data.jwt}`}); // Ìó§Îçî Authorization ÌïÑÎìú Ï†ÄÏû•\n\n\t\t\t\tnavigate(\"/bbslist\");\n\t\t\t\n\n\t\t}).catch((err) => {\n\t\t\tconsole.log(\"[Login.js] login() error :<\");\n\t\t\tconsole.log(err);\n\n\t\t\talert(\"‚ö†Ô∏è \" + err.response.data);\n\t\t});\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<table className=\"table\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th className=\"col-3\">ÏïÑÏù¥Îîî</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input type=\"text\" value={id} onChange={changeId} size=\"50px\" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>ÎπÑÎ∞ÄÎ≤àÌò∏</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input type=\"password\" value={pwd} onChange={changePwd} size=\"50px\" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table><br />\n\n\t\t\t<div className=\"my-1 d-flex justify-content-center\">\n\t\t\t\t<button className=\"btn btn-outline-secondary\" onClick={login}><i className=\"fas fa-sign-in-alt\"></i> Î°úÍ∑∏Ïù∏</button>\n\t\t\t</div>\n\n\t\t</div>\n\t);\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}