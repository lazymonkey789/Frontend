{"ast":null,"code":"import _regeneratorRuntime from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import axios from\"axios\";import{useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../context/AuthProvider\";import{HttpHeadersContext}from\"../context/HttpHeadersProvider\";/* 댓글 컴포넌트 */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Comment(props){var _useContext=useContext(AuthContext),auth=_useContext.auth,setAuth=_useContext.setAuth;var _useContext2=useContext(HttpHeadersContext),headers=_useContext2.headers,setHeaders=_useContext2.setHeaders;var comment=props.obj;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(comment.content),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var changeContent=function changeContent(event){setContent(event.target.value);};/* 댓글 수정 */var updateComment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var req;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:req={content:content};_context.next=3;return axios.patch(\"http://localhost:3000/comment/\".concat(comment.seq),req,{headers:headers}).then(function(resp){console.log(\"[Comment.js] updateComment() success :D\");console.log(resp.data);alert(\"댓글을 성공적으로 수정했습니다 !\");navigate(0);}).catch(function(err){console.log(\"[Comment.js] updateComment() error :<\");console.log(err);alert(err.response.data);});case 3:updateToggle();case 4:case\"end\":return _context.stop();}}},_callee);}));return function updateComment(){return _ref.apply(this,arguments);};}();/* 댓글 삭제 */var deleteComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"http://localhost:3000/comment/\".concat(comment.seq)).then(function(resp){console.log(\"[BbsComment.js] deleteComment() success :D\");console.log(resp.data);if(resp.data.deletedRecordCount==1){alert(\"답글을 성공적으로 삭제했습니다 :D\");navigate(0);}}).catch(function(err){console.log(\"[BbsComment.js] deleteComment() error :<\");console.log(err);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteComment(){return _ref2.apply(this,arguments);};}();function updateToggle(){setShow(function(show){return!show;});}// 삭제되지 않은 댓글의 경우\nif(comment.del==0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-1 d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/profile-placeholder.png\",alt:\"\\uD504\\uB85C\\uD544 \\uC774\\uBBF8\\uC9C0\",className:\"profile-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"span\",{className:\"comment-id\",children:comment.id})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"span\",{children:comment.createdAt})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 d-flex justify-content-end\",children:/* 자신이 작성한 댓글인 경우에만 수정 삭제 가능 */localStorage.getItem(\"id\")==comment.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:updateToggle,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\" \\uC218\\uC815\"]}),\" \\xA0\",/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger\",onClick:deleteComment,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"}),\" \\uC0AD\\uC81C\"]})]}):null})]}),/* 댓글 수정하는 경우 */show?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"my-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"col-10\",rows:\"5\",value:content,onChange:changeContent})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-1 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-dark\",onClick:updateComment,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\"  \\uC218\\uC815 \\uC644\\uB8CC\"]})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"my-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 comment\",children:content})})})]});}// 삭제된 댓글의 경우\nelse{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"my-5 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"comment\",children:/*#__PURE__*/_jsx(\"span\",{className:\"del-span\",children:\"\\u26A0\\uFE0F \\uC791\\uC131\\uC790\\uC5D0 \\uC758\\uD574 \\uC0AD\\uC81C\\uB41C \\uB313\\uAE00\\uC785\\uB2C8\\uB2E4.\"})})})});}}export default Comment;","map":{"version":3,"names":["React","axios","useContext","useState","useNavigate","AuthContext","HttpHeadersContext","Comment","props","auth","setAuth","headers","setHeaders","comment","obj","navigate","show","setShow","content","setContent","changeContent","event","target","value","updateComment","req","patch","seq","then","resp","console","log","data","alert","catch","err","response","updateToggle","deleteComment","delete","deletedRecordCount","del","id","createdAt","localStorage","getItem"],"sources":["C:/Equinox/Workspace/frontend/src/Components/comment/Comment.js"],"sourcesContent":["import  React from \"react\";\nimport axios from \"axios\";\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\"\nimport { AuthContext } from \"../context/AuthProvider\";\nimport { HttpHeadersContext } from \"../context/HttpHeadersProvider\";\n\n\n/* 댓글 컴포넌트 */\nfunction Comment(props) {\n\tconst {auth, setAuth} = useContext(AuthContext);\n\tconst {headers, setHeaders} = useContext(HttpHeadersContext);\n\tconst comment = props.obj;\n\n\tconst navigate = useNavigate();\n\n\tconst [show, setShow] = useState(false);\n\n\tconst [content, setContent] = useState(comment.content);\n\tconst changeContent = (event) => {\n\t\tsetContent(event.target.value);\n\t};\n\n\t/* 댓글 수정 */\n\tconst updateComment = async () => {\n\n\t\tconst req = {\n\t\t\tcontent: content\n\t\t};\n\n\t\tawait axios.patch(`http://localhost:3000/comment/${comment.seq}`, req, {headers: headers})\n\t\t.then((resp) => {\n\t\t\t\n\t\t\tconsole.log(\"[Comment.js] updateComment() success :D\");\n\t\t\tconsole.log(resp.data);\n\n\t\t\talert(\"댓글을 성공적으로 수정했습니다 !\");\n\t\t\tnavigate(0);\n\n\t\t}).catch((err) => {\n\n\t\t\tconsole.log(\"[Comment.js] updateComment() error :<\");\n\t\t\tconsole.log(err);\n\n\t\t\talert(err.response.data);\n\n\t\t});\n\n\n\t\tupdateToggle();\n\t}\n\n\t/* 댓글 삭제 */\n\tconst deleteComment = async () => {\n\t\tawait axios.delete(`http://localhost:3000/comment/${comment.seq}`)\n\t\t\t.then((resp) => {\n\t\t\t\tconsole.log(\"[BbsComment.js] deleteComment() success :D\");\n\t\t\t\tconsole.log(resp.data);\n\n\t\t\t\tif (resp.data.deletedRecordCount == 1) {\n\t\t\t\t\talert(\"답글을 성공적으로 삭제했습니다 :D\");\n\t\t\t\t\tnavigate(0);\n\t\t\t\t}\n\t\t\t}).catch((err) => {\n\t\t\t\tconsole.log(\"[BbsComment.js] deleteComment() error :<\");\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\tfunction updateToggle() { \n\t\tsetShow(show => !show) \n\t}\n\n\t// 삭제되지 않은 댓글의 경우\n\tif (comment.del == 0) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{/* 상단 영역 (프로필 이미지, 댓글 작성자, 댓글 작성시간) */}\n\t\t\t\t<div className=\"my-1 d-flex justify-content-center\">\n\t\t\t\t\t<div className=\"col-1\">\n\t\t\t\t\t\t<img src=\"/images/profile-placeholder.png\" alt=\"프로필 이미지\"\n\t\t\t\t\t\t\tclassName=\"profile-img\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-5\">\n\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t<span className=\"comment-id\">{comment.id}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t<span>{comment.createdAt}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"col-4 d-flex justify-content-end\">\n\t\t\t\t\t{\n\t\t\t\t\t\t/* 자신이 작성한 댓글인 경우에만 수정 삭제 가능 */\n\t\t\t\t\t\t(localStorage.getItem(\"id\") == comment.id) ?\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-outline-secondary\" onClick={updateToggle}><i className=\"fas fa-edit\"></i> 수정</button> &nbsp; \n\t\t\t\t\t\t\t\t<button className=\"btn btn-outline-danger\" onClick={deleteComment}><i className=\"fas fa-trash-alt\"></i> 삭제</button>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{\n\t\t\t\t\t/* 댓글 수정하는 경우 */\n\t\t\t\t\tshow ?\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* 하단 영역 (댓글 내용 + 댓글 내용 편집 창) */}\n\t\t\t\t\t\t\t<div className=\"my-3 d-flex justify-content-center\">\n\t\t\t\t\t\t\t\t<textarea className=\"col-10\" rows=\"5\" value={content} onChange={changeContent}></textarea>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"my-1 d-flex justify-content-center\">\n\t\t\t\t\t\t\t\t<button className=\"btn btn-dark\" onClick={updateComment}><i className=\"fas fa-edit\"></i>  수정 완료</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t:\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* 하단 영역 (댓글 내용) */}\n\t\t\t\t\t\t\t<div className=\"my-3 d-flex justify-content-center\">\n\t\t\t\t\t\t\t\t<div className=\"col-10 comment\">{content}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t}\n\n\n\t\t\t</>\n\t\t);\n\t}\n\n\t// 삭제된 댓글의 경우\n\telse {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"my-5 d-flex justify-content-center\">\n\t\t\t\t\t<div className=\"comment\">\n\t\t\t\t\t\t<span className=\"del-span\">⚠️ 작성자에 의해 삭제된 댓글입니다.</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}