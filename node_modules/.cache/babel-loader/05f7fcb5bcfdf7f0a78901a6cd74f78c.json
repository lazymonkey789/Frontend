{"ast":null,"code":"import _regeneratorRuntime from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Equinox/Workspace/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import{useParams,useNavigate}from\"react-router-dom\";import{Link}from\"react-router-dom\";import CommentWrite from\"../comment/CommentWrite\";import CommentList from\"../comment/CommentList\";import{AuthContext}from\"../context/AuthProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function BbsDetail(){var _useContext=useContext(AuthContext),auth=_useContext.auth,setAuth=_useContext.setAuth;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),bbs=_useState2[0],setBbs=_useState2[1];var _useParams=useParams(),seq=_useParams.seq;// 파라미터 가져오기\nvar navigate=useNavigate();var getBbsDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:3000/bbs/\".concat(seq),{params:{readerId:auth?auth:\"\"}}).then(function(resp){console.log(\"[BbsDetail.js] getBbsDetail() success :D\");console.log(resp.data);setBbs(resp.data.bbs);}).catch(function(err){console.log(\"[BbsDetail.js] getBbsDetail() error :<\");console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getBbsDetail(){return _ref.apply(this,arguments);};}();var deleteBbs=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"http://localhost:3000/bbs/\".concat(seq)).then(function(resp){console.log(\"[BbsDetail.js] deleteBbs() success :D\");console.log(resp.data);if(resp.data.deletedRecordCount===1){alert(\"게시글을 성공적으로 삭제했습니다 :D\");navigate(\"/bbslist\");}}).catch(function(err){console.log(\"[BbsDetail.js] deleteBbs() error :<\");console.log(err);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteBbs(){return _ref2.apply(this,arguments);};}();useEffect(function(){getBbsDetail();},[]);var updateBbs={seq:bbs.seq,id:bbs.id,title:bbs.title,content:bbs.content};var parentBbs={id:bbs.id,title:bbs.title};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsxs(Link,{className:\"btn btn-outline-secondary\",to:{pathname:\"/bbsanswer/\".concat(bbs.seq)},state:{parentBbs:parentBbs},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-pen\"}),\" \\uB2F5\\uAE00\\uC4F0\\uAE30\"]}),\" \\xA0\",/* 자신이 작성한 게시글인 경우에만 수정 삭제 가능 */localStorage.getItem(\"id\")==bbs.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{className:\"btn btn-outline-secondary\",to:\"/bbsupdate\",state:{bbs:updateBbs},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\" \\uC218\\uC815\"]}),\" \\xA0\",/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger\",onClick:deleteBbs,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"}),\" \\uC0AD\\uC81C\"]})]}):null]}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-3\",children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.id})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.title})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC791\\uC131\\uC77C\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.createdAt})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC870\\uD68C\\uC218\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.readCount})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{children:bbs.content})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Link,{className:\"btn btn-outline-secondary\",to:\"/bbslist\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-list\"}),\" \\uAE00\\uBAA9\\uB85D\"]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),auth?/*#__PURE__*/ // 로그인한 사용자만 댓글 작성 가능\n_jsx(CommentWrite,{seq:seq}):null,/*#__PURE__*/_jsx(CommentList,{seq:seq})]});}export default BbsDetail;","map":{"version":3,"names":["React","useEffect","useState","useContext","axios","useParams","useNavigate","Link","CommentWrite","CommentList","AuthContext","BbsDetail","auth","setAuth","bbs","setBbs","seq","navigate","getBbsDetail","get","params","readerId","then","resp","console","log","data","catch","err","deleteBbs","delete","deletedRecordCount","alert","updateBbs","id","title","content","parentBbs","pathname","localStorage","getItem","createdAt","readCount"],"sources":["C:/Equinox/Workspace/frontend/src/Components/bbs/BbsDetail.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport CommentWrite from \"../comment/CommentWrite\";\nimport CommentList from \"../comment/CommentList\";\nimport { AuthContext } from \"../context/AuthProvider\";\n\n\n\nfunction BbsDetail() {\n\n\tconst { auth, setAuth } = useContext(AuthContext)\n\n\tconst [bbs, setBbs] = useState({});\n\tconst { seq } = useParams(); // 파라미터 가져오기\n\n\tconst navigate = useNavigate();\n\n\tconst getBbsDetail = async () => {\n\n\t\tawait axios.get(`http://localhost:3000/bbs/${seq}`, {params: {readerId: auth ? auth : \"\"}})\n\t\t.then((resp) => {\n\t\t\tconsole.log(\"[BbsDetail.js] getBbsDetail() success :D\");\n\t\t\tconsole.log(resp.data);\n\n\t\t\tsetBbs(resp.data.bbs);\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(\"[BbsDetail.js] getBbsDetail() error :<\");\n\t\t\tconsole.log(err);\n\t\t});\n\n\t}\n\n\tconst deleteBbs = async () => {\n\n\t\tawait axios.delete(`http://localhost:3000/bbs/${seq}`)\n\t\t.then((resp) => {\n\t\t\tconsole.log(\"[BbsDetail.js] deleteBbs() success :D\");\n\t\t\tconsole.log(resp.data);\n\n\t\t\tif (resp.data.deletedRecordCount === 1) {\n\t\t\t\talert(\"게시글을 성공적으로 삭제했습니다 :D\");\n\t\t\t\tnavigate(\"/bbslist\");\n\t\t\t}\n\n\t\t}).catch((err) => {\n\t\t\tconsole.log(\"[BbsDetail.js] deleteBbs() error :<\");\n\t\t\tconsole.log(err);\n\t\t});\n\n\t}\n\n\tuseEffect(() => {\n\t\tgetBbsDetail();\n\t}, []);\n\n\tconst updateBbs = {\n\t\tseq: bbs.seq,\n\t\tid: bbs.id,\n\t\ttitle: bbs.title,\n\t\tcontent: bbs.content\n\t}\n\n\tconst parentBbs = {\n\t\tid: bbs.id,\n\t\ttitle: bbs.title\n\t}\n\n\treturn (\n\t\t<div>\n\n\t\t\t<div className=\"my-3 d-flex justify-content-end\">\n\t\t\t\t<Link className=\"btn btn-outline-secondary\" to={{pathname: `/bbsanswer/${bbs.seq}` }} state={{ parentBbs: parentBbs }}><i className=\"fas fa-pen\"></i> 답글쓰기</Link> &nbsp;\n\n\t\t\t{\n\t\t\t\t/* 자신이 작성한 게시글인 경우에만 수정 삭제 가능 */\n\t\t\t\t(localStorage.getItem(\"id\") == bbs.id) ?\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Link className=\"btn btn-outline-secondary\"  to=\"/bbsupdate\" state={{ bbs: updateBbs }}><i className=\"fas fa-edit\"></i> 수정</Link> &nbsp;\n\t\t\t\t\t\t<button className=\"btn btn-outline-danger\"  onClick={deleteBbs}><i className=\"fas fa-trash-alt\"></i> 삭제</button>\n\t\t\t\t\t</>\n\t\t\t\t:\n\t\t\t\tnull\n\t\t\t}\n\n\t\t\t</div>\n\n\t\t\t<table className=\"table table-striped\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th className=\"col-3\">작성자</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span>{bbs.id}</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>제목</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span>{bbs.title}</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>작성일</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span>{bbs.createdAt}</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>조회수</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span>{bbs.readCount}</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>내용</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{bbs.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t<div className=\"my-3 d-flex justify-content-center\">\n\t\t\t\t<Link className=\"btn btn-outline-secondary\" to=\"/bbslist\"><i className=\"fas fa-list\"></i> 글목록</Link>\n\t\t\t</div><br/><br/>\n\n\t\t\t{/* 댓글 작성 컴포넌트 */}\n\t\t\t{\n\t\t\t\t(auth) ? // 로그인한 사용자만 댓글 작성 가능\n\t\t\t\t\t<CommentWrite seq={seq}/>\n\t\t\t\t:\n\t\t\t\t\tnull\n\t\t\t}\n\t\t\t\n\n\t\t\t{/* 댓글 리스트 컴포넌트 */}\n\t\t\t<CommentList  seq={seq}/>\n\n\t\t</div>\n\t);\n}\n\nexport default BbsDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module"}